<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>GSASIIobj: Data objects &mdash; GSAS-II 0.2.0 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.2.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="GSAS-II 0.2.0 documentation" href="index.html" />
    <link rel="next" title="GSAS-II Utility Modules" href="GSASIIutil.html" />
    <link rel="prev" title="GSAS-II Main Module" href="GSASII.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="GSASIIutil.html" title="GSAS-II Utility Modules"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="GSASII.html" title="GSAS-II Main Module"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">GSAS-II 0.2.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <span class="target" id="module-GSASIIobj"></span><div class="section" id="gsasiiobj-data-objects">
<h1><em>GSASIIobj: Data objects</em><a class="headerlink" href="#gsasiiobj-data-objects" title="Permalink to this headline">¶</a></h1>
<p>This module defines and/or documents the data structures used in GSAS-II, as well
as provides misc. support routines.</p>
<div class="section" id="constraints-tree-item">
<h2>Constraints Tree Item<a class="headerlink" href="#constraints-tree-item" title="Permalink to this headline">¶</a></h2>
<span class="target" id="constraints-table"></span><p id="index-0">Constraints are stored in a dict, separated into groups.
Note that parameter are named in the following pattern,
p:h:&lt;var&gt;:n, where p is the phase number, h is the histogram number
&lt;var&gt; is a variable name and n is the parameter number.
If a parameter does not depend on a histogram or phase or is unnumbered, that
number is omitted.
Note that the contents of each dict item is a List where each element in the
list is a <a class="reference internal" href="#constraint-definitions-table"><em>constraint definition objects</em></a>.
The constraints in this form are converted in
<a class="reference internal" href="GSASIIstruc.html#GSASIIstrIO.ProcessConstraints" title="GSASIIstrIO.ProcessConstraints"><tt class="xref py py-func docutils literal"><span class="pre">GSASIIstrIO.ProcessConstraints()</span></tt></a> to the form used in <a class="reference internal" href="GSASIImapvars.html#module-GSASIImapvars" title="GSASIImapvars"><tt class="xref py py-mod docutils literal"><span class="pre">GSASIImapvars</span></tt></a></p>
<p>The keys in the Constraints dict are:</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">key</th>
<th class="head">explanation</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Hist</td>
<td>This specifies a list of constraints on
histogram-related parameters,
which will be of form :h:&lt;var&gt;:n.</td>
</tr>
<tr class="row-odd"><td>HAP</td>
<td>This specifies a list of constraints on parameters
that are defined for every histogram in each phase
and are of form p:h:&lt;var&gt;:n.</td>
</tr>
<tr class="row-even"><td>Phase</td>
<td>This specifies a list of constraints on phase
parameters,
which will be of form p::&lt;var&gt;:n.</td>
</tr>
<tr class="row-odd"><td>Global</td>
<td>This specifies a list of constraints on parameters
that are not tied to a histogram or phase and
are of form ::&lt;var&gt;:n</td>
</tr>
</tbody>
</table>
<span class="target" id="constraint-definitions-table"></span><p id="index-1">Each constraint is defined as an item in a list. Each constraint is of form:</p>
<div class="highlight-python"><div class="highlight"><pre>[[&lt;mult1&gt;, &lt;var1&gt;], [&lt;mult2&gt;, &lt;var2&gt;],..., &lt;fixedval&gt;, &lt;varyflag&gt;, &lt;constype&gt;]
</pre></div>
</div>
<p>Where the variable pair list item containing two values [&lt;mult&gt;, &lt;var&gt;], where:</p>
<blockquote>
<div><ul>
<li><p class="first">&lt;mult&gt; is a multiplier for the constraint (float)</p>
</li>
<li><dl class="first docutils">
<dt>&lt;var&gt; a <a class="reference internal" href="#GSASIIobj.G2VarObj" title="GSASIIobj.G2VarObj"><tt class="xref py py-class docutils literal"><span class="pre">G2VarObj</span></tt></a> object (previously a str variable name of form</dt>
<dd><p class="first last">&#8216;p:h:name[:at]&#8217;)</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
<p>Note that the last three items in the list play a special role:</p>
<blockquote>
<div><ul>
<li><p class="first">&lt;fixedval&gt; is the fixed value for a <cite>constant equation</cite> (<tt class="docutils literal"><span class="pre">constype=c</span></tt>)
constraint or is None. For a <cite>New variable</cite> (<tt class="docutils literal"><span class="pre">constype=f</span></tt>) constraint,
a variable name can be specified as a str (used for externally
generated constraints)</p>
</li>
<li><p class="first">&lt;varyflag&gt; is True or False for <cite>New variable</cite> (<tt class="docutils literal"><span class="pre">constype=f</span></tt>) constraints
or is None. This will be implemented in the future to indicate if these variables
should be refined.</p>
</li>
<li><p class="first">&lt;constype&gt; is one of four letters, &#8216;e&#8217;, &#8216;c&#8217;, &#8216;h&#8217;, &#8216;f&#8217; that determines the type of constraint:</p>
<blockquote>
<div><ul class="simple">
<li>&#8216;e&#8217; defines a set of equivalent variables. Only the first variable is refined (if the
appropriate refine flag is set) and and all other equivalent variables in the list
are generated from that variable, using the appropriate multipliers.</li>
<li>&#8216;c&#8217; defines a constraint equation of form,
<span class="math">\(m_1 \times var_1 + m_2 \times var_2 + ... = c\)</span></li>
<li>&#8216;h&#8217; defines a variable to hold (not vary). Any variable on this list is not varied,
even if its refinement flag is set. Only one [mult,var] pair is allowed in a hold
constraint and the mult value is ignored.
This is of particular value when needing to hold one or more variables where a
single flag controls a set of variables such as, coordinates, 
the reciprocal metric tensor or anisotropic displacement parameter.</li>
<li>&#8216;f&#8217; defines a new variable (function) according to relationship 
<span class="math">\(newvar = m_1 \times var_1 + m_2 \times var_2 + ...\)</span></li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="covariance-tree-item">
<h2>Covariance Tree Item<a class="headerlink" href="#covariance-tree-item" title="Permalink to this headline">¶</a></h2>
<span class="target" id="covariance-table"></span><p id="index-2">The Covariance tree item has results from the last least-squares run. They
are stored in a dict with these keys:</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="19%" />
<col width="65%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">key</th>
<th class="head">sub-key</th>
<th class="head">explanation</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>newCellDict</td>
<td></td>
<td>dict with lattice parameters computed by
<a class="reference internal" href="GSASIIstruc.html#GSASIIstrMath.GetNewCellParms" title="GSASIIstrMath.GetNewCellParms"><tt class="xref py py-func docutils literal"><span class="pre">GSASIIstrMath.GetNewCellParms()</span></tt></a> (dict)</td>
</tr>
<tr class="row-odd"><td>title</td>
<td></td>
<td>Name of gpx file(?) (str)</td>
</tr>
<tr class="row-even"><td>variables</td>
<td></td>
<td>Values for all N refined variables
(list of float values, length N,
ordered to match varyList)</td>
</tr>
<tr class="row-odd"><td>sig</td>
<td></td>
<td>Uncertainty values for all N refined variables
(list of float values, length N,
ordered to match varyList)</td>
</tr>
<tr class="row-even"><td>varyList</td>
<td></td>
<td>List of directly refined variables
(list of str values, length N)</td>
</tr>
<tr class="row-odd"><td>newAtomDict</td>
<td></td>
<td>dict with atom position values computed in
<a class="reference internal" href="GSASIIstruc.html#GSASIIstrMath.ApplyXYZshifts" title="GSASIIstrMath.ApplyXYZshifts"><tt class="xref py py-func docutils literal"><span class="pre">GSASIIstrMath.ApplyXYZshifts()</span></tt></a> (dict)</td>
</tr>
<tr class="row-even"><td>Rvals</td>
<td></td>
<td>R-factors, GOF, Marquardt value for last
refinement cycle (dict)</td>
</tr>
<tr class="row-odd"><td></td>
<td>Nobs</td>
<td>Number of observed data points (int)</td>
</tr>
<tr class="row-even"><td></td>
<td>Rwp</td>
<td>overall weighted profile R-factor (%, float)</td>
</tr>
<tr class="row-odd"><td></td>
<td>chisq</td>
<td>sum[w*(Iobs-Icalc)**2] for all data
note this is not the reduced chi squared (float)</td>
</tr>
<tr class="row-even"><td></td>
<td>lamMax</td>
<td>Marquardt value applied to Hessian diagonal
(float)</td>
</tr>
<tr class="row-odd"><td></td>
<td>GOF</td>
<td>The goodness-of-fit, aka square root of
the reduced chi squared. (float)</td>
</tr>
<tr class="row-even"><td>covMatrix</td>
<td></td>
<td>The (NxN) covVariance matrix (np.array)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="phase-tree-items">
<h2>Phase Tree Items<a class="headerlink" href="#phase-tree-items" title="Permalink to this headline">¶</a></h2>
<span class="target" id="phase-table"></span><p id="index-3">Phase information is stored in the GSAS-II data tree as children of the
Phases item in a dict with keys:</p>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="15%" />
<col width="75%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">key</th>
<th class="head">sub-key</th>
<th class="head">explanation</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>General</td>
<td></td>
<td>Overall information for the phase (dict)</td>
</tr>
<tr class="row-odd"><td></td>
<td>AtomPtrs</td>
<td>list of four locations to use to pull info
from the atom records (list)</td>
</tr>
<tr class="row-even"><td></td>
<td>F000X</td>
<td>x-ray F(000) intensity (float)</td>
</tr>
<tr class="row-odd"><td></td>
<td>F000N</td>
<td>neutron F(000) intensity (float)</td>
</tr>
<tr class="row-even"><td></td>
<td>Mydir</td>
<td>directory of current .gpx file (str)</td>
</tr>
<tr class="row-odd"><td></td>
<td>MCSA controls</td>
<td>Monte Carlo-Simulated Annealing controls (dict)</td>
</tr>
<tr class="row-even"><td></td>
<td>Cell</td>
<td>List with 8 items: cell refinement flag (bool)
a, b, c, (Angstrom, float)
alpha, beta &amp; gamma (degrees, float)
volume (A^3, float)</td>
</tr>
<tr class="row-odd"><td></td>
<td>Type</td>
<td>&#8216;nuclear&#8217; or &#8216;macromolecular&#8217; for now (str)</td>
</tr>
<tr class="row-even"><td></td>
<td>Map</td>
<td>dict of map parameters</td>
</tr>
<tr class="row-odd"><td></td>
<td>SH Texture</td>
<td>dict of spherical harmonic preferred orientation
parameters</td>
</tr>
<tr class="row-even"><td></td>
<td>Isotope</td>
<td>dict of isotopes for each atom type</td>
</tr>
<tr class="row-odd"><td></td>
<td>Isotopes</td>
<td>dict of scattering lengths for each isotope
combination for each element in phase</td>
</tr>
<tr class="row-even"><td></td>
<td>Name</td>
<td>phase name (str)</td>
</tr>
<tr class="row-odd"><td></td>
<td>SGData</td>
<td>Space group details as a <a class="reference internal" href="#sgdata-table"><em>space group (SGData) object</em></a>
as defined in <a class="reference internal" href="GSASIIutil.html#GSASIIspc.SpcGroup" title="GSASIIspc.SpcGroup"><tt class="xref py py-func docutils literal"><span class="pre">GSASIIspc.SpcGroup()</span></tt></a>.</td>
</tr>
<tr class="row-even"><td></td>
<td>Pawley neg wt</td>
<td>Restraint value for negative Pawley intensities
(float)</td>
</tr>
<tr class="row-odd"><td></td>
<td>Flip</td>
<td>dict of Charge flip controls</td>
</tr>
<tr class="row-even"><td></td>
<td>Data plot type</td>
<td>data plot type (&#8216;Mustrain&#8217;, &#8216;Size&#8217; or
&#8216;Preferred orientation&#8217;) for powder data (str)</td>
</tr>
<tr class="row-odd"><td></td>
<td>Mass</td>
<td>Mass of unit cell contents in g/mol</td>
</tr>
<tr class="row-even"><td></td>
<td>POhkl</td>
<td>March-Dollase preferred orientation direction</td>
</tr>
<tr class="row-odd"><td></td>
<td>Z</td>
<td>dict of atomic numbers for each atom type</td>
</tr>
<tr class="row-even"><td></td>
<td>vdWRadii</td>
<td>dict of van der Waals radii for each atom type</td>
</tr>
<tr class="row-odd"><td></td>
<td>Color</td>
<td>Colors for atoms (list of (r,b,g) triplets)</td>
</tr>
<tr class="row-even"><td></td>
<td>AtomTypes</td>
<td>List of atom types</td>
</tr>
<tr class="row-odd"><td></td>
<td>AtomMass</td>
<td>List of masses for atoms</td>
</tr>
<tr class="row-even"><td></td>
<td>doPawley</td>
<td>Flag for Pawley intensity extraction (bool)</td>
</tr>
<tr class="row-odd"><td></td>
<td>NoAtoms</td>
<td>Number of atoms per unit cell of each type (dict)</td>
</tr>
<tr class="row-even"><td></td>
<td>Pawley dmin</td>
<td>maximum Q (as d-space) to use for Pawley
extraction (float)</td>
</tr>
<tr class="row-odd"><td></td>
<td>BondRadii</td>
<td>Default radius for each atom used to compute
interatomic distances (list of floats)</td>
</tr>
<tr class="row-even"><td></td>
<td>AngleRadii</td>
<td>Default radius for each atom used to compute
interatomic angles (list of floats)</td>
</tr>
<tr class="row-odd"><td></td>
<td>DisAglCtls</td>
<td>Dict with distance/angle search controls,
which has keys &#8216;Name&#8217;, &#8216;AtomTypes&#8217;,
&#8216;BondRadii&#8217;, &#8216;AngleRadii&#8217; which are as above
except are possibly edited. Also contains
&#8216;Factors&#8217;, which is a 2 element list with
a multiplier for bond and angle search range
[typically (0.85,0.85)].</td>
</tr>
<tr class="row-even"><td>ranId</td>
<td></td>
<td>unique random number Id for phase (int)</td>
</tr>
<tr class="row-odd"><td>pId</td>
<td></td>
<td>Phase Id number for current project (int).</td>
</tr>
<tr class="row-even"><td>Atoms</td>
<td></td>
<td>Atoms in phase as a list of lists. The outer list
is for each atom, the inner list contains varying
items depending on the type of phase, see
the <a class="reference internal" href="#atoms-table"><em>Atom Records</em></a> description.
(list of lists)</td>
</tr>
<tr class="row-odd"><td>Drawing</td>
<td></td>
<td>Display parameters (dict)</td>
</tr>
<tr class="row-even"><td></td>
<td>ballScale</td>
<td>Size of spheres in ball-and-stick display (float)</td>
</tr>
<tr class="row-odd"><td></td>
<td>bondList</td>
<td>dict with bonds</td>
</tr>
<tr class="row-even"><td></td>
<td>contourLevel</td>
<td>map contour level in e/A^3 (float)</td>
</tr>
<tr class="row-odd"><td></td>
<td>showABC</td>
<td>Flag to show view point triplet (bool). True=show.</td>
</tr>
<tr class="row-even"><td></td>
<td>viewDir</td>
<td>cartesian viewing direction (np.array with three
elements)</td>
</tr>
<tr class="row-odd"><td></td>
<td>Zclip</td>
<td>clipping distance in A (float)</td>
</tr>
<tr class="row-even"><td></td>
<td>backColor</td>
<td>background for plot as and R,G,B triplet
(default = [0, 0, 0], black).
(list with three atoms)</td>
</tr>
<tr class="row-odd"><td></td>
<td>selectedAtoms</td>
<td>List of selected atoms (list of int values)</td>
</tr>
<tr class="row-even"><td></td>
<td>showRigidBodies</td>
<td>Flag to highlight rigid body placement</td>
</tr>
<tr class="row-odd"><td></td>
<td>sizeH</td>
<td>Size ratio for H atoms (float)</td>
</tr>
<tr class="row-even"><td></td>
<td>bondRadius</td>
<td>Size of binds in A (float)</td>
</tr>
<tr class="row-odd"><td></td>
<td>atomPtrs</td>
<td>positions of x, type, site sym, ADP flag in Draw Atoms (list)</td>
</tr>
<tr class="row-even"><td></td>
<td>viewPoint</td>
<td>list of lists. First item in list is [x,y,z]
in fractional coordinates for the center of
the plot. Second item list of previous &amp; current
atom number viewed (may be [0,0])</td>
</tr>
<tr class="row-odd"><td></td>
<td>showHydrogen</td>
<td>Flag to control plotting of H atoms.</td>
</tr>
<tr class="row-even"><td></td>
<td>unitCellBox</td>
<td>Flag to control display of the unit cell.</td>
</tr>
<tr class="row-odd"><td></td>
<td>ellipseProb</td>
<td>Probability limit for display of thermal
ellipsoids in % (float).</td>
</tr>
<tr class="row-even"><td></td>
<td>vdwScale</td>
<td>Multiplier of van der Waals radius for
display of vdW spheres.</td>
</tr>
<tr class="row-odd"><td></td>
<td>Atoms</td>
<td>A list of lists with an entry for each atom
that is plotted.</td>
</tr>
<tr class="row-even"><td></td>
<td>Zstep</td>
<td>Step to de/increase Z-clip (float)</td>
</tr>
<tr class="row-odd"><td></td>
<td>Quaternion</td>
<td>Viewing quaternion (4 element np.array)</td>
</tr>
<tr class="row-even"><td></td>
<td>radiusFactor</td>
<td>Distance ratio for searching for bonds. ? Bonds
are located that are within r(Ra+Rb) and (Ra+Rb)/r
where Ra and Rb are the atomic radii.</td>
</tr>
<tr class="row-odd"><td></td>
<td>oldxy</td>
<td>previous view point (list with two floats)</td>
</tr>
<tr class="row-even"><td></td>
<td>cameraPos</td>
<td>Viewing position in A for plot (float)</td>
</tr>
<tr class="row-odd"><td></td>
<td>depthFog</td>
<td>True if use depthFog on plot - set currently as False (bool)</td>
</tr>
<tr class="row-even"><td>RBModels</td>
<td></td>
<td>Rigid body assignments (note Rigid body definitions
are stored in their own main top-level tree entry.)</td>
</tr>
<tr class="row-odd"><td>Pawley ref</td>
<td></td>
<td>Pawley reflections</td>
</tr>
<tr class="row-even"><td>Histograms</td>
<td></td>
<td>A dict of dicts. The key for the outer dict is
the histograms tied to this phase. The inner
dict contains the combined phase/histogram
parameters for items such as scale factors,
size and strain parameters. (dict)</td>
</tr>
<tr class="row-odd"><td>MCSA</td>
<td></td>
<td>Monte-Carlo simulated annealing parameters (dict)</td>
</tr>
<tr class="row-even"><td></td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="rigid-body-objects">
<h2>Rigid Body Objects<a class="headerlink" href="#rigid-body-objects" title="Permalink to this headline">¶</a></h2>
<span class="target" id="rbdata-table"></span><p id="index-4">Rigid body descriptions are available for two types of rigid bodies: &#8216;Vector&#8217; 
and &#8216;Residue&#8217;. Vector rigid bodies are developed by a sequence of translations each
with a refinable magnitude and Residue rigid bodies are described as Cartesian coordinates
with defined refinable torsion angles.</p>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="14%" />
<col width="76%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">key</th>
<th class="head">sub-key</th>
<th class="head">explanation</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Vector</td>
<td>RBId</td>
<td>vector rigid bodies (dict of dict)</td>
</tr>
<tr class="row-odd"><td></td>
<td>AtInfo</td>
<td>Drad, Color: atom drawing radius &amp; color for each atom type (dict)</td>
</tr>
<tr class="row-even"><td></td>
<td>RBname</td>
<td>Name assigned by user to rigid body (str)</td>
</tr>
<tr class="row-odd"><td></td>
<td>VectMag</td>
<td>vector magnitudes in A (list)</td>
</tr>
<tr class="row-even"><td></td>
<td>rbXYZ</td>
<td>Cartesian coordinates for Vector rigid body (list of 3 float)</td>
</tr>
<tr class="row-odd"><td></td>
<td>rbRef</td>
<td>3 assigned reference atom nos. in rigid body for origin
definition, use center of atoms flag (list of 3 int &amp; 1 bool)</td>
</tr>
<tr class="row-even"><td></td>
<td>VectRef</td>
<td>refinement flags for VectMag values (list of bool)</td>
</tr>
<tr class="row-odd"><td></td>
<td>rbTypes</td>
<td>Atom types for each atom in rigid body (list of str)</td>
</tr>
<tr class="row-even"><td></td>
<td>rbVect</td>
<td>Cartesian vectors for each translation used to build rigid body (list of lists)</td>
</tr>
<tr class="row-odd"><td></td>
<td>useCount</td>
<td>Number of times rigid body is used in any structure (int)</td>
</tr>
<tr class="row-even"><td>Residue</td>
<td>RBId</td>
<td>residue rigid bodies (dict of dict)</td>
</tr>
<tr class="row-odd"><td></td>
<td>AtInfo</td>
<td>Drad, Color: atom drawing radius &amp; color for each atom type(dict)</td>
</tr>
<tr class="row-even"><td></td>
<td>RBname</td>
<td>Name assigned by user to rigid body (str)</td>
</tr>
<tr class="row-odd"><td></td>
<td>rbXYZ</td>
<td>Cartesian coordinates for Residue rigid body (list of 3 float)</td>
</tr>
<tr class="row-even"><td></td>
<td>rbTypes</td>
<td>Atom types for each atom in rigid body (list of str)</td>
</tr>
<tr class="row-odd"><td></td>
<td>atNames</td>
<td>Names of each atom in rigid body (e.g. C1,N2...) (list of str)</td>
</tr>
<tr class="row-even"><td></td>
<td>rbRef</td>
<td>3 assigned reference atom nos. in rigid body for origin
definition, use center of atoms flag (list of 3 int &amp; 1 bool)</td>
</tr>
<tr class="row-odd"><td></td>
<td>rbSeq</td>
<td>Orig,Piv,angle,Riding (list): definition of internal rigid body
torsion; origin atom (int), pivot atom (int), torsion angle (float),
riding atoms (list of int)</td>
</tr>
<tr class="row-even"><td></td>
<td>SelSeq</td>
<td>[int,int] used by SeqSizer to identify objects</td>
</tr>
<tr class="row-odd"><td></td>
<td>useCount</td>
<td>Number of times rigid body is used in any structure (int)</td>
</tr>
<tr class="row-even"><td>RBIds</td>
<td></td>
<td>unique Ids generated upon creation of each rigid body (dict)</td>
</tr>
<tr class="row-odd"><td></td>
<td>Vector</td>
<td>Ids for each Vector rigid body (list)</td>
</tr>
<tr class="row-even"><td></td>
<td>Residue</td>
<td>Ids for each Residue rigid body (list)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="space-group-objects">
<h2>Space Group Objects<a class="headerlink" href="#space-group-objects" title="Permalink to this headline">¶</a></h2>
<span class="target" id="sgdata-table"></span><p id="index-5">Space groups are interpreted by <a class="reference internal" href="GSASIIutil.html#GSASIIspc.SpcGroup" title="GSASIIspc.SpcGroup"><tt class="xref py py-func docutils literal"><span class="pre">GSASIIspc.SpcGroup()</span></tt></a> 
and the information is placed in a SGdata object 
which is a dict with these keys:</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">key</th>
<th class="head">explanation</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>SpGrp</td>
<td>space group symbol (str)</td>
</tr>
<tr class="row-odd"><td>Laue</td>
<td>one of the following 14 Laue classes:
-1, 2/m, mmm, 4/m, 4/mmm, 3R,
3mR, 3, 3m1, 31m, 6/m, 6/mmm, m3, m3m (str)</td>
</tr>
<tr class="row-even"><td>SGInv</td>
<td>True if centrosymmetric, False if not (bool)</td>
</tr>
<tr class="row-odd"><td>SGLatt</td>
<td>Lattice centering type. Will be one of
P, A, B, C, I, F, R (str)</td>
</tr>
<tr class="row-even"><td>SGUniq</td>
<td>unique axis if monoclinic. Will be
a, b, or c for monoclinic space groups.
Will be blank for non-monoclinic. (str)</td>
</tr>
<tr class="row-odd"><td>SGCen</td>
<td>Symmetry cell centering vectors. A (n,3) np.array
of centers. Will always have at least one row:
<tt class="docutils literal"><span class="pre">np.array([[0,</span> <span class="pre">0,</span> <span class="pre">0]])</span></tt></td>
</tr>
<tr class="row-even"><td>SGOps</td>
<td>symmetry operations as a list of form
<tt class="docutils literal"><span class="pre">[[M1,T1],</span> <span class="pre">[M2,T2],...]</span></tt>
where <span class="math">\(M_n\)</span> is a 3x3 np.array
and <span class="math">\(T_n\)</span> is a length 3 np.array.
Atom coordinates are transformed where the
Asymmetric unit coordinates [X is (x,y,z)]
are transformed using
<span class="math">\(X^\prime = M_n*X+T_n\)</span></td>
</tr>
<tr class="row-odd"><td>SGSys</td>
<td>symmetry unit cell: type one of
&#8216;triclinic&#8217;, &#8216;monoclinic&#8217;, &#8216;orthorhombic&#8217;,
&#8216;tetragonal&#8217;, &#8216;rhombohedral&#8217;, &#8216;trigonal&#8217;,
&#8216;hexagonal&#8217;, &#8216;cubic&#8217; (str)</td>
</tr>
<tr class="row-even"><td>SGPolax</td>
<td>Axes for space group polarity. Will be one of
&#8216;&#8217;, &#8216;x&#8217;, &#8216;y&#8217;, &#8216;x y&#8217;, &#8216;z&#8217;, &#8216;x z&#8217;, &#8216;y z&#8217;,
&#8216;xyz&#8217;. In the case where axes are arbitrary
&#8216;111&#8217; is used (P 1, and ?).</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="atom-records">
<h2>Atom Records<a class="headerlink" href="#atom-records" title="Permalink to this headline">¶</a></h2>
<span class="target" id="atoms-table"></span><p id="index-6">If <tt class="docutils literal"><span class="pre">phasedict</span></tt> points to the phase information in the data tree, then
atoms are contained in a list of atom records (list) in
<tt class="docutils literal"><span class="pre">phasedict['Atoms']</span></tt>. Also needed to read atom information 
are four pointers, <tt class="docutils literal"><span class="pre">cx,ct,cs,cia</span> <span class="pre">=</span> <span class="pre">phasedict['General']['atomPtrs']</span></tt>,
which define locations in the atom record, as shown below. Items shown are 
always present; additional ones for macromolecular phases are marked &#8216;mm&#8217;</p>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">location</th>
<th class="head">explanation</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>ct-4</td>
<td>mm - residue number (str)</td>
</tr>
<tr class="row-odd"><td>ct-3</td>
<td>mm - residue name (e.g. ALA) (str)</td>
</tr>
<tr class="row-even"><td>ct-2</td>
<td>mm - chain label (str)</td>
</tr>
<tr class="row-odd"><td>ct-1</td>
<td>atom label (str)</td>
</tr>
<tr class="row-even"><td>ct</td>
<td>atom type (str)</td>
</tr>
<tr class="row-odd"><td>ct+1</td>
<td>refinement flags; combination of &#8216;F&#8217;, &#8216;X&#8217;, &#8216;U&#8217; (str)</td>
</tr>
<tr class="row-even"><td>cx,cx+1,cx+2</td>
<td>the x,y and z coordinates (3 floats)</td>
</tr>
<tr class="row-odd"><td>cs</td>
<td>site symmetry (str)</td>
</tr>
<tr class="row-even"><td>cs+1</td>
<td>site multiplicity (int)</td>
</tr>
<tr class="row-odd"><td>cia</td>
<td>ADP flag: Isotropic (&#8216;I&#8217;) or Anisotropic (&#8216;A&#8217;)</td>
</tr>
<tr class="row-even"><td>cia+1</td>
<td>Uiso (float)</td>
</tr>
<tr class="row-odd"><td>cia+2...cia+6</td>
<td>U11, U22, U33, U12, U13, U23 (6 floats)</td>
</tr>
<tr class="row-even"><td>atom[-1]</td>
<td>unique atom identifier (int)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="drawing-atom-records">
<h2>Drawing Atom Records<a class="headerlink" href="#drawing-atom-records" title="Permalink to this headline">¶</a></h2>
<span class="target" id="drawing-atoms-table"></span><p id="index-7">If <tt class="docutils literal"><span class="pre">phasedict</span></tt> points to the phase information in the data tree, then
drawing atoms are contained in a list of drawing atom records (list) in
<tt class="docutils literal"><span class="pre">phasedict['Drawing']['Atoms']</span></tt>. Also needed to read atom information 
are four pointers, <tt class="docutils literal"><span class="pre">cx,ct,cs,ci</span> <span class="pre">=</span> <span class="pre">phasedict['Drawing']['AtomPtrs']</span></tt>,
which define locations in the atom record, as shown below. Items shown are 
always present; additional ones for macromolecular phases are marked &#8216;mm&#8217;</p>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="83%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">location</th>
<th class="head">explanation</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>ct-4</td>
<td>mm - residue number (str)</td>
</tr>
<tr class="row-odd"><td>ct-3</td>
<td>mm - residue name (e.g. ALA) (str)</td>
</tr>
<tr class="row-even"><td>ct-2</td>
<td>mm - chain label (str)</td>
</tr>
<tr class="row-odd"><td>ct-1</td>
<td>atom label (str)</td>
</tr>
<tr class="row-even"><td>ct</td>
<td>atom type (str)</td>
</tr>
<tr class="row-odd"><td>cx,cx+1,cx+2</td>
<td>the x,y and z coordinates (3 floats)</td>
</tr>
<tr class="row-even"><td>cs-1</td>
<td>Sym Op symbol; sym. op number + unit cell id (e.g. &#8216;1,0,-1&#8217;) (str)</td>
</tr>
<tr class="row-odd"><td>cs</td>
<td>atom drawing style; e.g. &#8216;balls &amp; sticks&#8217; (str)</td>
</tr>
<tr class="row-even"><td>cs+1</td>
<td>atom label style (e.g. &#8216;name&#8217;) (str)</td>
</tr>
<tr class="row-odd"><td>cs+2</td>
<td>atom color (RBG triplet) (int)</td>
</tr>
<tr class="row-even"><td>cs+3</td>
<td>ADP flag: Isotropic (&#8216;I&#8217;) or Anisotropic (&#8216;A&#8217;)</td>
</tr>
<tr class="row-odd"><td>cs+4</td>
<td>Uiso (float)</td>
</tr>
<tr class="row-even"><td>cs+5...cs+11</td>
<td>U11, U22, U33, U12, U13, U23 (6 floats)</td>
</tr>
<tr class="row-odd"><td>ci</td>
<td>unique atom identifier; matches source atom Id in Atom Records (int)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="powder-diffraction-tree-items">
<h2>Powder Diffraction Tree Items<a class="headerlink" href="#powder-diffraction-tree-items" title="Permalink to this headline">¶</a></h2>
<span class="target" id="powder-table"></span><p id="index-8">Every powder diffraction histogram is stored in the GSAS-II data tree
with a top-level entry named beginning with the string &#8220;PWDR &#8221;. The
diffraction data for that information are directly associated with
that tree item and there are a series of children to that item. The
routines <a class="reference internal" href="GSASII.html#GSASII.GSASII.GetUsedHistogramsAndPhasesfromTree" title="GSASII.GSASII.GetUsedHistogramsAndPhasesfromTree"><tt class="xref py py-func docutils literal"><span class="pre">GSASII.GSASII.GetUsedHistogramsAndPhasesfromTree()</span></tt></a>
and <a class="reference internal" href="GSASIIstruc.html#GSASIIstrIO.GetUsedHistogramsAndPhases" title="GSASIIstrIO.GetUsedHistogramsAndPhases"><tt class="xref py py-func docutils literal"><span class="pre">GSASIIstrIO.GetUsedHistogramsAndPhases()</span></tt></a> will
load this information into a dictionary where the child tree name is
used as a key, and the information in the main entry is assigned
a key of <tt class="docutils literal"><span class="pre">Data</span></tt>, as outlined below.</p>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="17%" />
<col width="59%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">key</th>
<th class="head">sub-key</th>
<th class="head">explanation</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Comments</td>
<td></td>
<td>Text strings extracted from the original powder
data header. These cannot be changed by the user;
it may be empty.</td>
</tr>
<tr class="row-odd"><td>Limits</td>
<td></td>
<td>A list of two two element lists, as [[Ld,Hd],[L,H]]
where L and Ld are the current and default lowest
two-theta value to be used and
where H and Hd are the current and default highest
two-theta value to be used.</td>
</tr>
<tr class="row-even"><td>Reflection Lists</td>
<td></td>
<td>A dict with an entry for each phase in the
histogram. The contents of each dict item
is a dict containing reflections, as described in
the <a class="reference internal" href="#powderrefl-table"><em>Powder Reflections</em></a>
description.</td>
</tr>
<tr class="row-odd"><td>Instrument Parameters</td>
<td></td>
<td>A list containing two dicts where the possible
keys in each dict are listed below. The value
for each item is a list containing three values:
the initial value, the current value and a
refinement flag which can have a value of
True, False or 0 where 0 indicates a value that
cannot be refined. The first and second
values are floats unless otherwise noted.
Items in the first dict are noted as [1]</td>
</tr>
<tr class="row-even"><td></td>
<td>Lam</td>
<td>Specifies a wavelength in Angstroms [1]</td>
</tr>
<tr class="row-odd"><td></td>
<td>Lam1</td>
<td>Specifies the primary wavelength in
Angstrom, when an alpha1, alpha2
source is used [1]</td>
</tr>
<tr class="row-even"><td></td>
<td><p class="first">Lam2</p>
<p class="last">I(L2)/I(L1)</p>
</td>
<td>Specifies the secondary wavelength in
Angstrom, when an alpha1, alpha2
source is used [1]
Ratio of Lam2 to Lam1 [1]</td>
</tr>
<tr class="row-odd"><td></td>
<td>Type</td>
<td><dl class="first last docutils">
<dt>Histogram type (str) [1]:</dt>
<dd><ul class="first last simple">
<li>&#8216;PXC&#8217; for constant wavelength x-ray</li>
<li>&#8216;PNC&#8217; for constant wavelength neutron</li>
<li>&#8216;PNT&#8217; for time of flight neutron</li>
</ul>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td></td>
<td>Zero</td>
<td>Two-theta zero correction in <em>degrees</em> [1]</td>
</tr>
<tr class="row-odd"><td></td>
<td>Azimuth</td>
<td>Azimuthal setting angle for data recorded
with differing setting angles [1]</td>
</tr>
<tr class="row-even"><td></td>
<td>U, V, W</td>
<td>Cagliotti profile coefficients
for Gaussian instrumental broadening, where the
FWHM goes as
<span class="math">\(U \tan^2\theta + V \tan\theta + W\)</span> [1]</td>
</tr>
<tr class="row-odd"><td></td>
<td>X, Y</td>
<td>Cauchy (Lorentzian) instrumental broadening
coefficients [1]</td>
</tr>
<tr class="row-even"><td></td>
<td>SH/L</td>
<td>Variant of the Finger-Cox-Jephcoat asymmetric
peak broadening ratio. Note that this is the
average between S/L and H/L where S is
sample height, H is the slit height and
L is the goniometer diameter. [1]</td>
</tr>
<tr class="row-odd"><td></td>
<td>Polariz.</td>
<td>Polarization coefficient. [1]</td>
</tr>
<tr class="row-even"><td>wtFactor</td>
<td></td>
<td>A weighting factor to increase or decrease
the leverage of data in the histogram (float).
A value of 1.0 weights the data with their
standard uncertainties and a larger value
increases the weighting of the data (equivalent
to decreasing the uncertainties).</td>
</tr>
<tr class="row-odd"><td>Sample Parameters</td>
<td></td>
<td>Specifies a dict with parameters that describe how
the data were collected, as listed
below. Refinable parameters are a list containing
a float and a bool, where the second value
specifies if the value is refined, otherwise
the value is a float unless otherwise noted.</td>
</tr>
<tr class="row-even"><td></td>
<td>Scale</td>
<td>The histogram scale factor (refinable)</td>
</tr>
<tr class="row-odd"><td></td>
<td>Absorption</td>
<td>The sample absorption coefficient as
<span class="math">\(\mu r\)</span> where r is the radius
(refinable). Only valid for Debye-Scherrer geometry.</td>
</tr>
<tr class="row-even"><td></td>
<td>SurfaceRoughA</td>
<td>Surface roughness parameter A as defined by
Surotti,J. Appl. Cryst, 5,325-331, 1972.(refinable -
only valid for Bragg-Brentano geometry)</td>
</tr>
<tr class="row-odd"><td></td>
<td>SurfaceRoughB</td>
<td>Surface roughness parameter B (refinable -
only valid for Bragg-Brentano geometry)</td>
</tr>
<tr class="row-even"><td></td>
<td>DisplaceX,
DisplaceY</td>
<td>Sample displacement from goniometer center
where Y is along the beam direction and
X is perpendicular. Units are <span class="math">\(\mu m\)</span>
(refinable).</td>
</tr>
<tr class="row-odd"><td></td>
<td>Phi, Chi,
Omega</td>
<td>Goniometer sample setting angles, in degrees.</td>
</tr>
<tr class="row-even"><td></td>
<td>Gonio. radius</td>
<td>Radius of the diffractometer in mm</td>
</tr>
<tr class="row-odd"><td></td>
<td>InstrName</td>
<td>A name for the instrument, used in preparing
a CIF (str).</td>
</tr>
<tr class="row-even"><td></td>
<td>Force,
Temperature,
Humidity,
Pressure,
Voltage</td>
<td>Variables that describe how the measurement
was performed. Not used directly in
any computations.</td>
</tr>
<tr class="row-odd"><td></td>
<td>ranId</td>
<td>The random-number Id for the histogram
(same value as where top-level key is ranId)</td>
</tr>
<tr class="row-even"><td></td>
<td>Type</td>
<td>Type of diffraction data, may be &#8216;Debye-Scherrer&#8217;
or &#8216;Bragg-Brentano&#8217; (str).</td>
</tr>
<tr class="row-odd"><td></td>
<td>Diffuse</td>
<td>not in use?</td>
</tr>
<tr class="row-even"><td>hId</td>
<td></td>
<td>The number assigned to the histogram when
the project is loaded or edited (can change)</td>
</tr>
<tr class="row-odd"><td>ranId</td>
<td></td>
<td>A random number id for the histogram
that does not change</td>
</tr>
<tr class="row-even"><td>Background</td>
<td></td>
<td>The background is stored as a list with where
the first item in the list is list and the second
item is a dict. The list contains the background
function and its coefficients; the dict contains
Debye diffuse terms and background peaks.
(TODO: this needs to be expanded.)</td>
</tr>
<tr class="row-odd"><td>Data</td>
<td></td>
<td><p class="first">The data consist of a list of 6 np.arrays
containing in order:</p>
<blockquote class="last">
<div><ol class="arabic simple" start="0">
<li>the x-postions (two-theta in degrees),</li>
<li>the intensity values (Yobs),</li>
<li>the weights for each Yobs value</li>
<li>the computed intensity values (Ycalc)</li>
<li>the background values</li>
<li>Yobs-Ycalc</li>
</ol>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="powder-reflection-data-structure">
<h2>Powder Reflection Data Structure<a class="headerlink" href="#powder-reflection-data-structure" title="Permalink to this headline">¶</a></h2>
<span class="target" id="powderrefl-table"></span><p id="index-9">For every phase in a histogram, the <tt class="docutils literal"><span class="pre">Reflection</span> <span class="pre">Lists</span></tt> value is a dict
one element of which is <cite>&#8216;RefList&#8217;</cite>, which is a np.array containing
reflections. The columns in that array are documented below.</p>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="86%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">index</th>
<th class="head">explanation</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>0,1,2</td>
<td>h,k,l (float)</td>
</tr>
<tr class="row-odd"><td>3</td>
<td>multiplicity</td>
</tr>
<tr class="row-even"><td>4</td>
<td>d-space, Angstrom</td>
</tr>
<tr class="row-odd"><td>5</td>
<td>pos, two-theta</td>
</tr>
<tr class="row-even"><td>6</td>
<td>sig, Gaussian width</td>
</tr>
<tr class="row-odd"><td>7</td>
<td>gam, Lorenzian width</td>
</tr>
<tr class="row-even"><td>8</td>
<td><span class="math">\(F_{obs}^2\)</span></td>
</tr>
<tr class="row-odd"><td>9</td>
<td><span class="math">\(F_{calc}^2\)</span></td>
</tr>
<tr class="row-even"><td>10</td>
<td>reflection phase, in degrees</td>
</tr>
<tr class="row-odd"><td>11</td>
<td>intensity correction for reflection, this times
<span class="math">\(F_{obs}^2\)</span> or <span class="math">\(F_{calc}^2\)</span> gives Iobs or Icalc</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="single-crystal-tree-items">
<h2>Single Crystal Tree Items<a class="headerlink" href="#single-crystal-tree-items" title="Permalink to this headline">¶</a></h2>
<span class="target" id="xtal-table"></span><p id="index-10">Every single crystal diffraction histogram is stored in the GSAS-II data tree
with a top-level entry named beginning with the string &#8220;HKLF &#8221;. The
diffraction data for that information are directly associated with
that tree item and there are a series of children to that item. The
routines <a class="reference internal" href="GSASII.html#GSASII.GSASII.GetUsedHistogramsAndPhasesfromTree" title="GSASII.GSASII.GetUsedHistogramsAndPhasesfromTree"><tt class="xref py py-func docutils literal"><span class="pre">GSASII.GSASII.GetUsedHistogramsAndPhasesfromTree()</span></tt></a>
and <a class="reference internal" href="GSASIIstruc.html#GSASIIstrIO.GetUsedHistogramsAndPhases" title="GSASIIstrIO.GetUsedHistogramsAndPhases"><tt class="xref py py-func docutils literal"><span class="pre">GSASIIstrIO.GetUsedHistogramsAndPhases()</span></tt></a> will
load this information into a dictionary where the child tree name is
used as a key, and the information in the main entry is assigned
a key of <tt class="docutils literal"><span class="pre">Data</span></tt>, as outlined below.</p>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="17%" />
<col width="58%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">key</th>
<th class="head">sub-key</th>
<th class="head">explanation</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Data</td>
<td></td>
<td>A dict that contains the
reflection table,
as described in the
<a class="reference internal" href="#xtalrefl-table"><em>Single Crystal Reflections</em></a>
description.</td>
</tr>
<tr class="row-odd"><td>Instrument Parameters</td>
<td></td>
<td>A list containing two dicts where the possible
keys in each dict are listed below. The value
for most items is a list containing two values:
the initial value, the current value.
The first and second
values are floats unless otherwise noted.</td>
</tr>
<tr class="row-even"><td></td>
<td>Lam</td>
<td>Specifies a wavelength in Angstroms (two floats)</td>
</tr>
<tr class="row-odd"><td></td>
<td>Type</td>
<td><dl class="first last docutils">
<dt>Histogram type (two str values):</dt>
<dd><ul class="first last simple">
<li>&#8216;SXC&#8217; for constant wavelength x-ray</li>
<li>&#8216;SNC&#8217; for constant wavelength neutron</li>
<li>&#8216;SNT&#8217; for time of flight neutron</li>
</ul>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td></td>
<td>InstrName</td>
<td>A name for the instrument, used in preparing
a CIF (str).</td>
</tr>
<tr class="row-odd"><td>wtFactor</td>
<td></td>
<td>A weighting factor to increase or decrease
the leverage of data in the histogram (float).
A value of 1.0 weights the data with their
standard uncertainties and a larger value
increases the weighting of the data (equivalent
to decreasing the uncertainties).</td>
</tr>
<tr class="row-even"><td>hId</td>
<td></td>
<td>The number assigned to the histogram when
the project is loaded or edited (can change)</td>
</tr>
<tr class="row-odd"><td>ranId</td>
<td></td>
<td>A random number id for the histogram
that does not change</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="single-crystal-reflection-data-structure">
<h2>Single Crystal Reflection Data Structure<a class="headerlink" href="#single-crystal-reflection-data-structure" title="Permalink to this headline">¶</a></h2>
<span class="target" id="xtalrefl-table"></span><p id="index-11">For every single crystal a histogram, the <tt class="docutils literal"><span class="pre">'Data'</span></tt> item contains
the structure factors as an np.array in item <cite>&#8216;RefList&#8217;</cite>.
The columns in that array are documented below.</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">index</th>
<th class="head">explanation</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>0,1,2</td>
<td>h,k,l (float)</td>
</tr>
<tr class="row-odd"><td>3</td>
<td>multiplicity</td>
</tr>
<tr class="row-even"><td>4</td>
<td>d-space, Angstrom</td>
</tr>
<tr class="row-odd"><td>5</td>
<td><span class="math">\(F_{obs}^2\)</span></td>
</tr>
<tr class="row-even"><td>6</td>
<td><span class="math">\(\sigma(F_{obs}^2)\)</span></td>
</tr>
<tr class="row-odd"><td>7</td>
<td><span class="math">\(F_{calc}^2\)</span></td>
</tr>
<tr class="row-even"><td>8</td>
<td><span class="math">\(F_{obs}^2T\)</span></td>
</tr>
<tr class="row-odd"><td>9</td>
<td><span class="math">\(F_{calc}^2T\)</span></td>
</tr>
<tr class="row-even"><td>10</td>
<td>reflection phase, in degrees</td>
</tr>
<tr class="row-odd"><td>11</td>
<td>intensity correction for reflection, this times
<span class="math">\(F_{obs}^2\)</span> or <span class="math">\(F_{calc}^2\)</span>
gives Iobs or Icalc</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="image-data-structure">
<h2>Image Data Structure<a class="headerlink" href="#image-data-structure" title="Permalink to this headline">¶</a></h2>
<span class="target" id="image-table"></span><p id="index-12">Every 2-dimensional image is stored in the GSAS-II data tree
with a top-level entry named beginning with the string &#8220;IMG &#8221;. The
image data are directly associated with that tree item and there 
are a series of children to that item. The routines <a class="reference internal" href="GSASII.html#GSASII.GSASII.GetUsedHistogramsAndPhasesfromTree" title="GSASII.GSASII.GetUsedHistogramsAndPhasesfromTree"><tt class="xref py py-func docutils literal"><span class="pre">GSASII.GSASII.GetUsedHistogramsAndPhasesfromTree()</span></tt></a>
and <a class="reference internal" href="GSASIIstruc.html#GSASIIstrIO.GetUsedHistogramsAndPhases" title="GSASIIstrIO.GetUsedHistogramsAndPhases"><tt class="xref py py-func docutils literal"><span class="pre">GSASIIstrIO.GetUsedHistogramsAndPhases()</span></tt></a> will
load this information into a dictionary where the child tree name is
used as a key, and the information in the main entry is assigned
a key of <tt class="docutils literal"><span class="pre">Data</span></tt>, as outlined below.</p>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="73%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">key</th>
<th class="head">sub-key</th>
<th class="head">explanation</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Comments</td>
<td></td>
<td>Text strings extracted from the original image data
header or a metafile. These cannot be changed by
the user; it may be empty.</td>
</tr>
<tr class="row-odd"><td>Image Controls</td>
<td>azmthOff</td>
<td>(float) The offset to be applied to an azimuthal
value. Accomodates
detector orientations other than with the detector
X-axis
horizontal.</td>
</tr>
<tr class="row-even"><td></td>
<td>background image</td>
<td>(list:str,float) The name of a tree item (&#8220;IMG ...&#8221;) that is to be subtracted
during image integration multiplied by value. It must have the same size/shape as
the integrated image. NB: value &lt; 0 for subtraction.</td>
</tr>
<tr class="row-odd"><td></td>
<td>calibrant</td>
<td>(str) The material used for determining the position/orientation
of the image. The data is obtained from <a class="reference internal" href="GSASIIutil.html#module-ImageCalibrants" title="ImageCalibrants"><tt class="xref py py-func docutils literal"><span class="pre">ImageCalibrants()</span></tt></a>
and UserCalibrants.py (supplied by user).</td>
</tr>
<tr class="row-even"><td></td>
<td>calibdmin</td>
<td>(float) The minimum d-spacing used during the last calibration run.</td>
</tr>
<tr class="row-odd"><td></td>
<td>calibskip</td>
<td>(int) The number of expected diffraction lines skipped during the last
calibration run.</td>
</tr>
<tr class="row-even"><td></td>
<td>center</td>
<td>(list:floats) The [X,Y] point in detector coordinates (mm) where the direct beam
strikes the detector plane as determined by calibration. This point
does not have to be within the limits of the detector boundaries.</td>
</tr>
<tr class="row-odd"><td></td>
<td>centerAzm</td>
<td>(bool) If True then the azimuth reported for the integrated slice
of the image is at the center line otherwise it is at the leading edge.</td>
</tr>
<tr class="row-even"><td></td>
<td>color</td>
<td>(str) The name of the colormap used to display the image. Default = &#8216;Paired&#8217;.</td>
</tr>
<tr class="row-odd"><td></td>
<td>cutoff</td>
<td>(float) The minimum value of I/Ib for a point selected in a diffraction ring for
calibration calculations. See pixLimit for details as how point is found.</td>
</tr>
<tr class="row-even"><td></td>
<td>DetDepth</td>
<td>(float) Coefficient for penetration correction to distance; accounts for diffraction
ring offset at higher angles. Optionally determined by calibration.</td>
</tr>
<tr class="row-odd"><td></td>
<td>DetDepthRef</td>
<td>(bool) If True then refine DetDepth during calibration/recalibration calculation.</td>
</tr>
<tr class="row-even"><td></td>
<td>distance</td>
<td>(float) The distance (mm) from sample to detector plane.</td>
</tr>
<tr class="row-odd"><td></td>
<td>ellipses</td>
<td>(list:lists) Each object in ellipses is a list [center,phi,radii,color] where
center (list) is location (mm) of the ellipse center on the detector plane, phi is the
rotation of the ellipse minor axis from the x-axis, and radii are the minor &amp; major
radii of the ellipse. If radii[0] is negative then parameters describe a hyperbola. Color
is the selected drawing color (one of &#8216;b&#8217;, &#8216;g&#8217; ,&#8217;r&#8217;) for the ellipse/hyperbola.</td>
</tr>
<tr class="row-even"><td></td>
<td>edgemin</td>
<td>(float) Not used;  parameter in EdgeFinder code.</td>
</tr>
<tr class="row-odd"><td></td>
<td>fullIntegrate</td>
<td>(bool) If True then integrate over full 360 deg azimuthal range.</td>
</tr>
<tr class="row-even"><td></td>
<td>GonioAngles</td>
<td>(list:floats) The &#8216;Omega&#8217;,&#8217;Chi&#8217;,&#8217;Phi&#8217; goniometer angles used for this image.
Required for texture calculations.</td>
</tr>
<tr class="row-odd"><td></td>
<td>invert_x</td>
<td>(bool) If True display the image with the x-axis inverted.</td>
</tr>
<tr class="row-even"><td></td>
<td>invert_y</td>
<td>(bool) If True display the image with the y-axis inverted.</td>
</tr>
<tr class="row-odd"><td></td>
<td>IOtth</td>
<td>(list:floats) The minimum and maximum 2-theta values to be used for integration.</td>
</tr>
<tr class="row-even"><td></td>
<td>LRazimuth</td>
<td>(list:floats) The minimum and maximum azimuth values to be used for integration.</td>
</tr>
<tr class="row-odd"><td></td>
<td>Oblique</td>
<td>(list:float,bool) If True apply a detector absorption correction using the value to the
intensities obtained during integration.</td>
</tr>
<tr class="row-even"><td></td>
<td>outAzimuths</td>
<td>(int) The number of azimuth pie slices.</td>
</tr>
<tr class="row-odd"><td></td>
<td>outChannels</td>
<td>(int) The number of 2-theta steps.</td>
</tr>
<tr class="row-even"><td></td>
<td>pixelSize</td>
<td>(list:ints) The X,Y dimensions (microns) of each pixel.</td>
</tr>
<tr class="row-odd"><td></td>
<td>pixLimit</td>
<td>(int) A box in the image with 2*pixLimit+1 edges is searched to find the maximum.
This value (I) along with the minimum (Ib) in the box is reported by <a class="reference internal" href="GSASIIimage.html#GSASIIimage.ImageLocalMax" title="GSASIIimage.ImageLocalMax"><tt class="xref py py-func docutils literal"><span class="pre">GSASIIimage.ImageLocalMax()</span></tt></a>
and subject to cutoff in <a class="reference internal" href="GSASIIimage.html#GSASIIimage.makeRing" title="GSASIIimage.makeRing"><tt class="xref py py-func docutils literal"><span class="pre">GSASIIimage.makeRing()</span></tt></a>.
Locations are used to construct rings of points for calibration calcualtions.</td>
</tr>
<tr class="row-even"><td></td>
<td>PolaVal</td>
<td>(list:float,bool) If type=&#8217;SASD&#8217; and if True, apply polarization correction to intensities from
integration using value.</td>
</tr>
<tr class="row-odd"><td></td>
<td>rings</td>
<td>(list:lists) Each entry is [X,Y,dsp] where X &amp; Y are lists of x,y coordinates around a
diffraction ring with the same d-spacing (dsp)</td>
</tr>
<tr class="row-even"><td></td>
<td>ring</td>
<td>(list) The x,y coordinates of the &gt;5 points on an inner ring
selected by the user,</td>
</tr>
<tr class="row-odd"><td></td>
<td>Range</td>
<td>(list) The minimum &amp; maximum values of the image</td>
</tr>
<tr class="row-even"><td></td>
<td>rotation</td>
<td>(float) The angle between the x-axis and the vector about which the
detector is tilted. Constrained to -180 to 180 deg.</td>
</tr>
<tr class="row-odd"><td></td>
<td>SampleShape</td>
<td>(str) Currently only &#8216;Cylinder&#8217;. Sample shape for Debye-Scherrer experiments; used for absorption
calculations.</td>
</tr>
<tr class="row-even"><td></td>
<td>SampleAbs</td>
<td>(list: float,bool) Value of absorption coefficient for Debye-Scherrer experimnents, flag if True
to cause correction to be applied.</td>
</tr>
<tr class="row-odd"><td></td>
<td>setDefault</td>
<td>(bool) If True the use the image controls values for all new images to be read. (might be removed)</td>
</tr>
<tr class="row-even"><td></td>
<td>setRings</td>
<td>(bool) If True then display all the selected x,y ring positions (vida supra rings) used in the calibration.</td>
</tr>
<tr class="row-odd"><td></td>
<td>showLines</td>
<td>(bool) If True then isplay the integration limits to be used.</td>
</tr>
<tr class="row-even"><td></td>
<td>size</td>
<td>(list:int) The number of pixels on the image x &amp; y axes</td>
</tr>
<tr class="row-odd"><td></td>
<td>type</td>
<td>(str) One of &#8216;PWDR&#8217;, &#8216;SASD&#8217; or &#8216;REFL&#8217; for powder, small angle or reflectometry data, respectively.</td>
</tr>
<tr class="row-even"><td></td>
<td>tilt</td>
<td>(float) The angle the detector normal makes with the incident beam; range -90 to 90.</td>
</tr>
<tr class="row-odd"><td></td>
<td>wavelength</td>
<td>(float) Tha radiation wavelength (Angstroms) as entered by the user (or someday obtained from the image header).</td>
</tr>
<tr class="row-even"><td>Masks</td>
<td>Arcs</td>
<td>(list: lists) Each entry [2-theta,[azimuth[0],azimuth[1]],thickness] describes an arc mask
to be excluded from integration</td>
</tr>
<tr class="row-odd"><td></td>
<td>Frames</td>
<td>(list:lists) Each entry describes the x,y points (3 or more - mm) that describe a frame outside
of which is excluded from recalibration and integration. Only one frame is allowed.</td>
</tr>
<tr class="row-even"><td></td>
<td>Points</td>
<td>(list:lists) Each entry [x,y,radius] (mm) describes an excluded spot on the image to be excluded
from integration.</td>
</tr>
<tr class="row-odd"><td></td>
<td>Polygons</td>
<td>(list:lists) Each entry is a list of 3+ [x,y] points (mm) that describe a polygon on the image
to be excluded from integration.</td>
</tr>
<tr class="row-even"><td></td>
<td>Rings</td>
<td>(list: lists) Each entry [2-theta,thickness] describes a ring mask
to be excluded from integration.</td>
</tr>
<tr class="row-odd"><td></td>
<td>Thresholds</td>
<td>(list:[tuple,list]) [(Imin,Imax),[Imin,Imax]] This gives lower and upper limits for points on the image to be included
in integrsation. The tuple is the image intensity limits and the list are those set by the user.</td>
</tr>
<tr class="row-even"><td>Stress/Strain</td>
<td>Sample phi</td>
<td>(float) Sample rotation about vertical axis.</td>
</tr>
<tr class="row-odd"><td></td>
<td>Sample z</td>
<td>(float) Sample translation from the calibration sample position (for Sample phi = 0)
These will be restricted by space group symmetry; result of strain fit refinement.</td>
</tr>
<tr class="row-even"><td></td>
<td>Type</td>
<td>(str) &#8216;True&#8217; or &#8216;Conventional&#8217;: The strain model used for the calculation.</td>
</tr>
<tr class="row-odd"><td></td>
<td>d-zero</td>
<td>(list:dict) Each item is for a diffraction ring on the image; all items are from the same phase
and are used to determine the strain tensor.
The dictionary items are:
&#8216;Dset&#8217;: (float) True d-spacing for the diffraction ring; entered by the user.
&#8216;Dcalc&#8217;: (float) Average calculated d-spacing determined from strain coeff.
&#8216;Emat&#8217;: (list: float) The strain tensor elements e11, e12 &amp; e22 (e21=e12, rest are 0)
&#8216;Esig&#8217;: (list: float) Esds for Emat from fitting.
&#8216;pixLimit&#8217;: (int) Search range to find highest point on ring for each data point
&#8216;cutoff&#8217;: (float) I/Ib cutoff for searching.
&#8216;ImxyObs&#8217;: (list: lists) [[X],[Y]] observed points to be used for strain calculations.
&#8216;ImtaObs&#8217;: (list: lists) [[d],[azm]] transformed via detector calibration from ImxyObs.
&#8216;ImtaCalc&#8217;: (list: lists [[d],[azm]] calculated d-spacing &amp; azimuth from fit.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="parameter-dictionary">
<h2>Parameter Dictionary<a class="headerlink" href="#parameter-dictionary" title="Permalink to this headline">¶</a></h2>
<span class="target" id="parmdict-table"></span><p id="index-13">The parameter dictionary contains all of the variable parameters for the refinement.
The dictionary keys are the name of the parameter (&lt;phase&gt;:&lt;hist&gt;:&lt;name&gt;:&lt;atom&gt;). 
It is prepared in two ways. When loaded from the tree
(in <a class="reference internal" href="GSASII.html#GSASII.GSASII.MakeLSParmDict" title="GSASII.GSASII.MakeLSParmDict"><tt class="xref py py-meth docutils literal"><span class="pre">GSASII.GSASII.MakeLSParmDict()</span></tt></a> and
<a class="reference internal" href="GSASIIGUIr.html#GSASIIIO.ExportBaseclass.loadParmDict" title="GSASIIIO.ExportBaseclass.loadParmDict"><tt class="xref py py-meth docutils literal"><span class="pre">GSASIIIO.ExportBaseclass.loadParmDict()</span></tt></a>), 
the values are lists with two elements: <tt class="docutils literal"><span class="pre">[value,</span> <span class="pre">refine</span> <span class="pre">flag]</span></tt></p>
<p>When loaded from the GPX file (in
<a class="reference internal" href="GSASIIstruc.html#GSASIIstrMain.Refine" title="GSASIIstrMain.Refine"><tt class="xref py py-func docutils literal"><span class="pre">GSASIIstrMain.Refine()</span></tt></a> and <a class="reference internal" href="GSASIIstruc.html#GSASIIstrMain.SeqRefine" title="GSASIIstrMain.SeqRefine"><tt class="xref py py-func docutils literal"><span class="pre">GSASIIstrMain.SeqRefine()</span></tt></a>), the value in the
dict is the actual parameter value (usually a float, but sometimes a 
letter or string flag value (such as I or A for iso/anisotropic).</p>
</div>
<div class="section" id="classes-and-routines">
<h2><em>Classes and routines</em><a class="headerlink" href="#classes-and-routines" title="Permalink to this headline">¶</a></h2>
<dl class="data">
<dt id="GSASIIobj.AtomIdLookup">
<tt class="descclassname">GSASIIobj.</tt><tt class="descname">AtomIdLookup</tt><em class="property"> = {}</em><a class="headerlink" href="#GSASIIobj.AtomIdLookup" title="Permalink to this definition">¶</a></dt>
<dd><p>dict listing for each phase index as a str, the atom label and atom random Id,
keyed by atom sequential index as a str;
best to access this using <a class="reference internal" href="#GSASIIobj.LookupAtomLabel" title="GSASIIobj.LookupAtomLabel"><tt class="xref py py-func docutils literal"><span class="pre">LookupAtomLabel()</span></tt></a></p>
</dd></dl>

<dl class="data">
<dt id="GSASIIobj.AtomRanIdLookup">
<tt class="descclassname">GSASIIobj.</tt><tt class="descname">AtomRanIdLookup</tt><em class="property"> = {}</em><a class="headerlink" href="#GSASIIobj.AtomRanIdLookup" title="Permalink to this definition">¶</a></dt>
<dd><p>dict listing for each phase the atom sequential index keyed by atom random Id;
best to access this using <a class="reference internal" href="#GSASIIobj.LookupAtomId" title="GSASIIobj.LookupAtomId"><tt class="xref py py-func docutils literal"><span class="pre">LookupAtomId()</span></tt></a></p>
</dd></dl>

<dl class="function">
<dt id="GSASIIobj.CompileVarDesc">
<tt class="descclassname">GSASIIobj.</tt><tt class="descname">CompileVarDesc</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/GSASIIobj.html#CompileVarDesc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GSASIIobj.CompileVarDesc" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the values in the variable description lookup table (<a class="reference internal" href="#GSASIIobj.VarDesc" title="GSASIIobj.VarDesc"><tt class="xref py py-attr docutils literal"><span class="pre">VarDesc</span></tt></a>)
into <a class="reference internal" href="#GSASIIobj.reVarDesc" title="GSASIIobj.reVarDesc"><tt class="xref py py-attr docutils literal"><span class="pre">reVarDesc</span></tt></a>. This is called in <a class="reference internal" href="#GSASIIobj.getDescr" title="GSASIIobj.getDescr"><tt class="xref py py-func docutils literal"><span class="pre">getDescr()</span></tt></a> so the initialization
is always done before use.</p>
<p>Note that keys may contain regular expressions, where &#8216;[xyz]&#8217;
matches &#8216;x&#8217; &#8216;y&#8217; or &#8216;z&#8217; (equivalently &#8216;[x-z]&#8217; describes this as range of values).
&#8216;.*&#8217; matches any string. For example:</p>
<div class="highlight-python"><div class="highlight"><pre>&#39;AUiso&#39;:&#39;Atomic isotropic displacement parameter&#39;,
</pre></div>
</div>
<p>will match variable <tt class="docutils literal"><span class="pre">'p::AUiso:a'</span></tt>.
If parentheses are used in the key, the contents of those parentheses can be
used in the value, such as:</p>
<div class="highlight-python"><div class="highlight"><pre>&#39;AU([123][123])&#39;:&#39;Atomic anisotropic displacement parameter U\1&#39;,
</pre></div>
</div>
<p>will match <tt class="docutils literal"><span class="pre">AU11</span></tt>, <tt class="docutils literal"><span class="pre">AU23</span></tt>,.. and <cite>U11</cite>, <cite>U23</cite> etc will be displayed
in the value when used.</p>
</dd></dl>

<dl class="data">
<dt id="GSASIIobj.DefaultControls">
<tt class="descclassname">GSASIIobj.</tt><tt class="descname">DefaultControls</tt><em class="property"> = {'F**2': True, 'shift factor': 1.0, 'deriv type': 'analytic Hessian', 'max cyc': 3, 'minF/sig': 0, 'FreeVar1': 'Sample humidity (%)', 'Author': 'no name', 'FreeVar2': 'Sample voltage (V)', 'FreeVar3': 'Applied load (MN)', 'min dM/M': 0.0001}</em><a class="headerlink" href="#GSASIIobj.DefaultControls" title="Permalink to this definition">¶</a></dt>
<dd><p>Values to be used as defaults for the initial contents of the <tt class="docutils literal"><span class="pre">Controls</span></tt>
data tree item.</p>
</dd></dl>

<dl class="class">
<dt id="GSASIIobj.ExpressionCalcObj">
<em class="property">class </em><tt class="descclassname">GSASIIobj.</tt><tt class="descname">ExpressionCalcObj</tt><big>(</big><em>exprObj</em><big>)</big><a class="reference internal" href="_modules/GSASIIobj.html#ExpressionCalcObj"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GSASIIobj.ExpressionCalcObj" title="Permalink to this definition">¶</a></dt>
<dd><p>An object used to evaluate an expression from a <a class="reference internal" href="#GSASIIobj.ExpressionObj" title="GSASIIobj.ExpressionObj"><tt class="xref py py-class docutils literal"><span class="pre">ExpressionObj</span></tt></a>
object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>exprObj</strong> (<em>ExpressionObj</em>) &#8211; a <a class="reference internal" href="#GSASIIobj.ExpressionObj" title="GSASIIobj.ExpressionObj"><tt class="xref py py-class docutils literal"><span class="pre">ExpressionObj</span></tt></a> expression object with
an expression string and mappings for the parameter labels in that object.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="GSASIIobj.ExpressionCalcObj.EvalExpression">
<tt class="descname">EvalExpression</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/GSASIIobj.html#ExpressionCalcObj.EvalExpression"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GSASIIobj.ExpressionCalcObj.EvalExpression" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluate an expression. Note that the expression
and mapping are taken from the <a class="reference internal" href="#GSASIIobj.ExpressionObj" title="GSASIIobj.ExpressionObj"><tt class="xref py py-class docutils literal"><span class="pre">ExpressionObj</span></tt></a> expression object
and the parameter values were specified in <a class="reference internal" href="#GSASIIobj.ExpressionCalcObj.SetupCalc" title="GSASIIobj.ExpressionCalcObj.SetupCalc"><tt class="xref py py-meth docutils literal"><span class="pre">SetupCalc()</span></tt></a>.
:returns: a single value for the expression. If parameter
values are arrays (for example, from wild-carded variable names),
the sum of the resulting expression is returned.</p>
<p>For example, if the expression is <tt class="docutils literal"><span class="pre">'A*B'</span></tt>,
where A is 2.0 and B maps to <tt class="docutils literal"><span class="pre">'1::Afrac:*'</span></tt>, which evaluates to:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">]</span>
</pre></div>
</div>
<p>then the result will be <tt class="docutils literal"><span class="pre">4.0</span></tt>.</p>
</dd></dl>

<dl class="method">
<dt id="GSASIIobj.ExpressionCalcObj.SetupCalc">
<tt class="descname">SetupCalc</tt><big>(</big><em>parmDict</em><big>)</big><a class="reference internal" href="_modules/GSASIIobj.html#ExpressionCalcObj.SetupCalc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GSASIIobj.ExpressionCalcObj.SetupCalc" title="Permalink to this definition">¶</a></dt>
<dd><p>Do all preparations to use the expression for computation.
Adds the free parameter values to the parameter dict (parmDict).</p>
</dd></dl>

<dl class="method">
<dt id="GSASIIobj.ExpressionCalcObj.UpdateDict">
<tt class="descname">UpdateDict</tt><big>(</big><em>parmDict</em><big>)</big><a class="reference internal" href="_modules/GSASIIobj.html#ExpressionCalcObj.UpdateDict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GSASIIobj.ExpressionCalcObj.UpdateDict" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the dict for the expression with values in a dict
:param list parmDict: a dict of values some of which may be in use here</p>
</dd></dl>

<dl class="method">
<dt id="GSASIIobj.ExpressionCalcObj.UpdateVars">
<tt class="descname">UpdateVars</tt><big>(</big><em>varList</em>, <em>valList</em><big>)</big><a class="reference internal" href="_modules/GSASIIobj.html#ExpressionCalcObj.UpdateVars"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GSASIIobj.ExpressionCalcObj.UpdateVars" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the dict for the expression with a set of values
:param list varList: a list of variable names
:param list valList: a list of corresponding values</p>
</dd></dl>

<dl class="attribute">
<dt id="GSASIIobj.ExpressionCalcObj.compiledExpr">
<tt class="descname">compiledExpr</tt><em class="property"> = None</em><a class="headerlink" href="#GSASIIobj.ExpressionCalcObj.compiledExpr" title="Permalink to this definition">¶</a></dt>
<dd><p>The expression as compiled byte-code</p>
</dd></dl>

<dl class="attribute">
<dt id="GSASIIobj.ExpressionCalcObj.eObj">
<tt class="descname">eObj</tt><em class="property"> = None</em><a class="headerlink" href="#GSASIIobj.ExpressionCalcObj.eObj" title="Permalink to this definition">¶</a></dt>
<dd><p>The expression and mappings; a <a class="reference internal" href="#GSASIIobj.ExpressionObj" title="GSASIIobj.ExpressionObj"><tt class="xref py py-class docutils literal"><span class="pre">ExpressionObj</span></tt></a> object</p>
</dd></dl>

<dl class="attribute">
<dt id="GSASIIobj.ExpressionCalcObj.exprDict">
<tt class="descname">exprDict</tt><em class="property"> = None</em><a class="headerlink" href="#GSASIIobj.ExpressionCalcObj.exprDict" title="Permalink to this definition">¶</a></dt>
<dd><p>dict that defines values for labels used in expression and packages
referenced by functions</p>
</dd></dl>

<dl class="attribute">
<dt id="GSASIIobj.ExpressionCalcObj.fxnpkgdict">
<tt class="descname">fxnpkgdict</tt><em class="property"> = None</em><a class="headerlink" href="#GSASIIobj.ExpressionCalcObj.fxnpkgdict" title="Permalink to this definition">¶</a></dt>
<dd><p>a dict with references to packages needed to
find functions referenced in the expression.</p>
</dd></dl>

<dl class="attribute">
<dt id="GSASIIobj.ExpressionCalcObj.lblLookup">
<tt class="descname">lblLookup</tt><em class="property"> = None</em><a class="headerlink" href="#GSASIIobj.ExpressionCalcObj.lblLookup" title="Permalink to this definition">¶</a></dt>
<dd><p>Lookup table that specifies the expression label name that is
tied to a particular GSAS-II parameters in the parmDict.</p>
</dd></dl>

<dl class="attribute">
<dt id="GSASIIobj.ExpressionCalcObj.varLookup">
<tt class="descname">varLookup</tt><em class="property"> = None</em><a class="headerlink" href="#GSASIIobj.ExpressionCalcObj.varLookup" title="Permalink to this definition">¶</a></dt>
<dd><p>Lookup table that specifies the GSAS-II variable(s)
indexed by the expression label name. (Used for only for diagnostics
not evaluation of expression.)</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="GSASIIobj.ExpressionObj">
<em class="property">class </em><tt class="descclassname">GSASIIobj.</tt><tt class="descname">ExpressionObj</tt><a class="reference internal" href="_modules/GSASIIobj.html#ExpressionObj"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GSASIIobj.ExpressionObj" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines an object with a user-defined expression, to be used for
secondary fits or restraints. Object is created null, but is changed
using <a class="reference internal" href="#GSASIIobj.ExpressionObj.LoadExpression" title="GSASIIobj.ExpressionObj.LoadExpression"><tt class="xref py py-meth docutils literal"><span class="pre">LoadExpression()</span></tt></a>. This contains only the minimum
information that needs to be stored to save and load the expression
and how it is mapped to GSAS-II variables.</p>
<dl class="method">
<dt id="GSASIIobj.ExpressionObj.CheckVars">
<tt class="descname">CheckVars</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/GSASIIobj.html#ExpressionObj.CheckVars"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GSASIIobj.ExpressionObj.CheckVars" title="Permalink to this definition">¶</a></dt>
<dd><p>Check that the expression can be parsed, all functions are
defined and that input loaded into the object is internally
consistent. If not an Exception is raised.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">a dict with references to packages needed to
find functions referenced in the expression.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="GSASIIobj.ExpressionObj.EditExpression">
<tt class="descname">EditExpression</tt><big>(</big><em>exprVarLst</em>, <em>varSelect</em>, <em>varName</em>, <em>varValue</em>, <em>varRefflag</em><big>)</big><a class="reference internal" href="_modules/GSASIIobj.html#ExpressionObj.EditExpression"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GSASIIobj.ExpressionObj.EditExpression" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the expression and associated settings from the object into
arrays used for editing.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>exprVarLst</strong> (<em>list</em>) &#8211; parameter labels found in the expression</li>
<li><strong>varSelect</strong> (<em>dict</em>) &#8211; this will be 0 for Free parameters
and non-zero for expression labels linked to G2 variables.</li>
<li><strong>varName</strong> (<em>dict</em>) &#8211; Defines a name (str) associated with each free parameter</li>
<li><strong>varValue</strong> (<em>dict</em>) &#8211; Defines a value (float) associated with each free parameter</li>
<li><strong>varRefflag</strong> (<em>dict</em>) &#8211; Defines a refinement flag (bool)
associated with each free parameter</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">the expression as a str</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="GSASIIobj.ExpressionObj.GetDepVar">
<tt class="descname">GetDepVar</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/GSASIIobj.html#ExpressionObj.GetDepVar"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GSASIIobj.ExpressionObj.GetDepVar" title="Permalink to this definition">¶</a></dt>
<dd><p>return the dependent variable, or None</p>
</dd></dl>

<dl class="method">
<dt id="GSASIIobj.ExpressionObj.GetIndependentVars">
<tt class="descname">GetIndependentVars</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/GSASIIobj.html#ExpressionObj.GetIndependentVars"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GSASIIobj.ExpressionObj.GetIndependentVars" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the names of the required independent parameters used in expression</p>
</dd></dl>

<dl class="method">
<dt id="GSASIIobj.ExpressionObj.GetVaried">
<tt class="descname">GetVaried</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/GSASIIobj.html#ExpressionObj.GetVaried"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GSASIIobj.ExpressionObj.GetVaried" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the names of the free parameters that will be refined</p>
</dd></dl>

<dl class="method">
<dt id="GSASIIobj.ExpressionObj.GetVariedVarVal">
<tt class="descname">GetVariedVarVal</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/GSASIIobj.html#ExpressionObj.GetVariedVarVal"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GSASIIobj.ExpressionObj.GetVariedVarVal" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the names and values of the free parameters that will be refined</p>
</dd></dl>

<dl class="method">
<dt id="GSASIIobj.ExpressionObj.LoadExpression">
<tt class="descname">LoadExpression</tt><big>(</big><em>expr</em>, <em>exprVarLst</em>, <em>varSelect</em>, <em>varName</em>, <em>varValue</em>, <em>varRefflag</em><big>)</big><a class="reference internal" href="_modules/GSASIIobj.html#ExpressionObj.LoadExpression"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GSASIIobj.ExpressionObj.LoadExpression" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the expression and associated settings into the object. Raises
an exception if the expression is not parsed, if not all functions
are defined or if not all needed parameter labels in the expression
are defined.</p>
<p>This will not test if the variable referenced in these definitions
are actually in the parameter dictionary. This is checked when the
computation for the expression is done in <tt class="xref py py-meth docutils literal"><span class="pre">SetupCalc()</span></tt>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>expr</strong> (<em>str</em>) &#8211; the expression</li>
<li><strong>exprVarLst</strong> (<em>list</em>) &#8211; parameter labels found in the expression</li>
<li><strong>varSelect</strong> (<em>dict</em>) &#8211; this will be 0 for Free parameters
and non-zero for expression labels linked to G2 variables.</li>
<li><strong>varName</strong> (<em>dict</em>) &#8211; Defines a name (str) associated with each free parameter</li>
<li><strong>varValue</strong> (<em>dict</em>) &#8211; Defines a value (float) associated with each free parameter</li>
<li><strong>varRefflag</strong> (<em>dict</em>) &#8211; Defines a refinement flag (bool)
associated with each free parameter</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="GSASIIobj.ExpressionObj.ParseExpression">
<tt class="descname">ParseExpression</tt><big>(</big><em>expr</em><big>)</big><a class="reference internal" href="_modules/GSASIIobj.html#ExpressionObj.ParseExpression"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GSASIIobj.ExpressionObj.ParseExpression" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse an expression and return a dict of called functions and
the variables used in the expression. Returns None in case an error
is encountered. If packages are referenced in functions, they are loaded 
and the functions are looked up into the modules global
workspace.</p>
<p>Note that no changes are made to the object other than
saving an error message, so that this can be used for testing prior
to the save.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">a list of used variables</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="GSASIIobj.ExpressionObj.SetDepVar">
<tt class="descname">SetDepVar</tt><big>(</big><em>var</em><big>)</big><a class="reference internal" href="_modules/GSASIIobj.html#ExpressionObj.SetDepVar"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GSASIIobj.ExpressionObj.SetDepVar" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the dependent variable, if used</p>
</dd></dl>

<dl class="method">
<dt id="GSASIIobj.ExpressionObj.UpdateVariedVars">
<tt class="descname">UpdateVariedVars</tt><big>(</big><em>varyList</em>, <em>values</em><big>)</big><a class="reference internal" href="_modules/GSASIIobj.html#ExpressionObj.UpdateVariedVars"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GSASIIobj.ExpressionObj.UpdateVariedVars" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates values for the free parameters (after a refinement); only updates refined vars</p>
</dd></dl>

<dl class="attribute">
<dt id="GSASIIobj.ExpressionObj.assgnVars">
<tt class="descname">assgnVars</tt><em class="property"> = None</em><a class="headerlink" href="#GSASIIobj.ExpressionObj.assgnVars" title="Permalink to this definition">¶</a></dt>
<dd><p>A dict where keys are label names in the expression mapping to a GSAS-II
variable. The value a G2 variable name.
Note that the G2 variable name may contain a wild-card and correspond to
multiple values.</p>
</dd></dl>

<dl class="attribute">
<dt id="GSASIIobj.ExpressionObj.expression">
<tt class="descname">expression</tt><em class="property"> = None</em><a class="headerlink" href="#GSASIIobj.ExpressionObj.expression" title="Permalink to this definition">¶</a></dt>
<dd><p>The expression as a text string</p>
</dd></dl>

<dl class="attribute">
<dt id="GSASIIobj.ExpressionObj.freeVars">
<tt class="descname">freeVars</tt><em class="property"> = None</em><a class="headerlink" href="#GSASIIobj.ExpressionObj.freeVars" title="Permalink to this definition">¶</a></dt>
<dd><p>A dict where keys are label names in the expression mapping to a free
parameter. The value is a list with:</p>
<blockquote>
<div><ul class="simple">
<li>a name assigned to the parameter</li>
<li>a value for to the parameter and</li>
<li>a flag to determine if the variable is refined.</li>
</ul>
</div></blockquote>
</dd></dl>

<dl class="attribute">
<dt id="GSASIIobj.ExpressionObj.lastError">
<tt class="descname">lastError</tt><em class="property"> = None</em><a class="headerlink" href="#GSASIIobj.ExpressionObj.lastError" title="Permalink to this definition">¶</a></dt>
<dd><p>Shows last encountered error in processing expression
(list of 1-3 str values)</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="GSASIIobj.G2VarObj">
<em class="property">class </em><tt class="descclassname">GSASIIobj.</tt><tt class="descname">G2VarObj</tt><big>(</big><em>*args</em><big>)</big><a class="reference internal" href="_modules/GSASIIobj.html#G2VarObj"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GSASIIobj.G2VarObj" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines a GSAS-II variable either using the phase/atom/histogram
unique Id numbers or using a character string that specifies
variables by phase/atom/histogram number (which can change).
Note that <tt class="xref py py-func docutils literal"><span class="pre">LoadID()</span></tt> should be used to (re)load the current Ids
before creating or later using the G2VarObj object.</p>
<p>This can store rigid body variables, but does not translate the residue # and
body # to/from random Ids</p>
<p>A <a class="reference internal" href="#GSASIIobj.G2VarObj" title="GSASIIobj.G2VarObj"><tt class="xref py py-class docutils literal"><span class="pre">G2VarObj</span></tt></a> object can be created with a single parameter:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>varname</strong> (<em>str/tuple</em>) &#8211; <dl class="docutils">
<dt>a single value can be used to create a <a class="reference internal" href="#GSASIIobj.G2VarObj" title="GSASIIobj.G2VarObj"><tt class="xref py py-class docutils literal"><span class="pre">G2VarObj</span></tt></a></dt>
<dd>object. If a string, it must be of form &#8220;p:h:var&#8221; or &#8220;p:h:var:a&#8221;, where</dd>
</dl>
<ul class="simple">
<li>p is the phase number (which may be left blank or may be &#8216;*&#8217; to indicate all phases);</li>
<li>h is the histogram number (which may be left blank or may be &#8216;*&#8217; to indicate all histograms);</li>
<li>a is the atom number (which may be left blank in which case the third colon is omitted).
The atom number can be specified as &#8216;*&#8217; if a phase number is specified (not as &#8216;*&#8217;).
For rigid body variables, specify a will be a string of form &#8220;residue:body#&#8221;</li>
</ul>
<blockquote>
<div>Alternately a single tuple of form (Phase,Histogram,VarName,AtomID) can be used, where
Phase, Histogram, and AtomID are None or are ranId values (or one can be &#8216;*&#8217;)
and VarName is a string. Note that if Phase is &#8216;*&#8217; then the AtomID is an atom number.
For a rigid body variables, AtomID is a string of form &#8220;residue:body#&#8221;.</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p>If four positional arguments are supplied, they are:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>phasenum</strong> (<em>str/int</em>) &#8211; The number for the phase (or None or &#8216;*&#8217;)</li>
<li><strong>histnum</strong> (<em>str/int</em>) &#8211; The number for the histogram (or None or &#8216;*&#8217;)</li>
<li><strong>varname</strong> (<em>str</em>) &#8211; a single value can be used to create a <a class="reference internal" href="#GSASIIobj.G2VarObj" title="GSASIIobj.G2VarObj"><tt class="xref py py-class docutils literal"><span class="pre">G2VarObj</span></tt></a></li>
<li><strong>atomnum</strong> (<em>str/int</em>) &#8211; The number for the atom (or None or &#8216;*&#8217;)</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="GSASIIobj.G2VarObj.varname">
<tt class="descname">varname</tt><big>(</big><big>)</big><a class="reference internal" href="_modules/GSASIIobj.html#G2VarObj.varname"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GSASIIobj.G2VarObj.varname" title="Permalink to this definition">¶</a></dt>
<dd><p>Formats the GSAS-II variable name as a &#8220;traditional&#8221; GSAS-II variable 
string (p:h:&lt;var&gt;:a) or (p:h:&lt;var&gt;)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">the variable name as a str</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="GSASIIobj.GenWildCard">
<tt class="descclassname">GSASIIobj.</tt><tt class="descname">GenWildCard</tt><big>(</big><em>varlist</em><big>)</big><a class="reference internal" href="_modules/GSASIIobj.html#GenWildCard"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GSASIIobj.GenWildCard" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate wildcard versions of G2 variables. These introduce &#8216;*&#8217;
for a phase, histogram or atom number (but only for one of these
fields) but only when there is more than one matching variable in the
input variable list. So if the input is this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">varlist</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;0::AUiso:0&#39;</span><span class="p">,</span> <span class="s">&#39;0::AUiso:1&#39;</span><span class="p">,</span> <span class="s">&#39;1::AUiso:0&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>then the output will be this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">wildList</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;*::AUiso:0&#39;</span><span class="p">,</span> <span class="s">&#39;0::AUiso:*&#39;</span><span class="p">]</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>varlist</strong> (<em>list</em>) &#8211; an input list of GSAS-II variable names
(such as 0::AUiso:0)</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">wildList, the generated list of wild card variable names.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="data">
<dt id="GSASIIobj.HistIdLookup">
<tt class="descclassname">GSASIIobj.</tt><tt class="descname">HistIdLookup</tt><em class="property"> = {}</em><a class="headerlink" href="#GSASIIobj.HistIdLookup" title="Permalink to this definition">¶</a></dt>
<dd><p>dict listing histogram name and random Id, keyed by sequential histogram index as a str;
best to access this using <a class="reference internal" href="#GSASIIobj.LookupHistName" title="GSASIIobj.LookupHistName"><tt class="xref py py-func docutils literal"><span class="pre">LookupHistName()</span></tt></a></p>
</dd></dl>

<dl class="data">
<dt id="GSASIIobj.HistRanIdLookup">
<tt class="descclassname">GSASIIobj.</tt><tt class="descname">HistRanIdLookup</tt><em class="property"> = {}</em><a class="headerlink" href="#GSASIIobj.HistRanIdLookup" title="Permalink to this definition">¶</a></dt>
<dd><p>dict listing histogram sequential index keyed by histogram random Id;
best to access this using <a class="reference internal" href="#GSASIIobj.LookupHistId" title="GSASIIobj.LookupHistId"><tt class="xref py py-func docutils literal"><span class="pre">LookupHistId()</span></tt></a></p>
</dd></dl>

<dl class="function">
<dt id="GSASIIobj.IndexAllIds">
<tt class="descclassname">GSASIIobj.</tt><tt class="descname">IndexAllIds</tt><big>(</big><em>Histograms</em>, <em>Phases</em><big>)</big><a class="reference internal" href="_modules/GSASIIobj.html#IndexAllIds"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GSASIIobj.IndexAllIds" title="Permalink to this definition">¶</a></dt>
<dd><p>Scan through the used phases &amp; histograms and create an index
to the random numbers of phases, histograms and atoms. While doing this,
confirm that assigned random numbers are unique &#8211; just in case lightning
strikes twice in the same place.</p>
<p>Note: this code assumes that the atom random Id (ranId) is the last 
element each atom record.</p>
<p>This is called in three places (only): <a class="reference internal" href="GSASIIstruc.html#GSASIIstrIO.GetUsedHistogramsAndPhases" title="GSASIIstrIO.GetUsedHistogramsAndPhases"><tt class="xref py py-func docutils literal"><span class="pre">GSASIIstrIO.GetUsedHistogramsAndPhases()</span></tt></a>
(which loads the histograms and phases from a GPX file),
<a class="reference internal" href="GSASII.html#GSASII.GSASII.GetUsedHistogramsAndPhasesfromTree" title="GSASII.GSASII.GetUsedHistogramsAndPhasesfromTree"><tt class="xref py py-meth docutils literal"><span class="pre">GetUsedHistogramsAndPhasesfromTree()</span></tt></a>
(which loads the histograms and phases from the data tree.) and
<a class="reference internal" href="GSASIIGUI.html#GSASIIconstrGUI.UpdateConstraints" title="GSASIIconstrGUI.UpdateConstraints"><tt class="xref py py-meth docutils literal"><span class="pre">GSASIIconstrGUI.UpdateConstraints()</span></tt></a>
(which displays &amp; edits the constraints in a GUI)</p>
<p>TODO: do we need a lookup for rigid body variables?</p>
</dd></dl>

<dl class="function">
<dt id="GSASIIobj.LookupAtomId">
<tt class="descclassname">GSASIIobj.</tt><tt class="descname">LookupAtomId</tt><big>(</big><em>pId</em>, <em>ranId</em><big>)</big><a class="reference internal" href="_modules/GSASIIobj.html#LookupAtomId"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GSASIIobj.LookupAtomId" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the atom number from a phase and atom random Id</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>pId</strong> (<em>int/str</em>) &#8211; the sequential number of the phase</li>
<li><strong>ranId</strong> (<em>int</em>) &#8211; the random Id assigned to an atom</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">the index number of the atom (str)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="GSASIIobj.LookupAtomLabel">
<tt class="descclassname">GSASIIobj.</tt><tt class="descname">LookupAtomLabel</tt><big>(</big><em>pId</em>, <em>index</em><big>)</big><a class="reference internal" href="_modules/GSASIIobj.html#LookupAtomLabel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GSASIIobj.LookupAtomLabel" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the atom label from a phase and atom index number</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>pId</strong> (<em>int/str</em>) &#8211; the sequential number of the phase</li>
<li><strong>index</strong> (<em>int</em>) &#8211; the index of the atom in the list of atoms</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">the label for the atom (str) and the random Id of the atom (int)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="GSASIIobj.LookupHistId">
<tt class="descclassname">GSASIIobj.</tt><tt class="descname">LookupHistId</tt><big>(</big><em>ranId</em><big>)</big><a class="reference internal" href="_modules/GSASIIobj.html#LookupHistId"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GSASIIobj.LookupHistId" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the histogram number and name from a histogram random Id</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>ranId</strong> (<em>int</em>) &#8211; the random Id assigned to a histogram</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">the sequential Id (hId) number for the histogram (str)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="GSASIIobj.LookupHistName">
<tt class="descclassname">GSASIIobj.</tt><tt class="descname">LookupHistName</tt><big>(</big><em>hId</em><big>)</big><a class="reference internal" href="_modules/GSASIIobj.html#LookupHistName"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GSASIIobj.LookupHistName" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the histogram number and name from a histogram Id</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>hId</strong> (<em>int/str</em>) &#8211; the sequential assigned to a histogram</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">(hist,ranId) where hist is the name of the histogram (str)
and ranId is the random # id for the histogram (int)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="GSASIIobj.LookupPhaseId">
<tt class="descclassname">GSASIIobj.</tt><tt class="descname">LookupPhaseId</tt><big>(</big><em>ranId</em><big>)</big><a class="reference internal" href="_modules/GSASIIobj.html#LookupPhaseId"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GSASIIobj.LookupPhaseId" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the phase number and name from a phase random Id</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>ranId</strong> (<em>int</em>) &#8211; the random Id assigned to a phase</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">the sequential Id (pId) number for the phase (str)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="GSASIIobj.LookupPhaseName">
<tt class="descclassname">GSASIIobj.</tt><tt class="descname">LookupPhaseName</tt><big>(</big><em>pId</em><big>)</big><a class="reference internal" href="_modules/GSASIIobj.html#LookupPhaseName"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GSASIIobj.LookupPhaseName" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the phase number and name from a phase Id</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>pId</strong> (<em>int/str</em>) &#8211; the sequential assigned to a phase</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">(phase,ranId) where phase is the name of the phase (str)
and ranId is the random # id for the phase (int)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="GSASIIobj.LookupWildCard">
<tt class="descclassname">GSASIIobj.</tt><tt class="descname">LookupWildCard</tt><big>(</big><em>varname</em>, <em>varlist</em><big>)</big><a class="reference internal" href="_modules/GSASIIobj.html#LookupWildCard"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GSASIIobj.LookupWildCard" title="Permalink to this definition">¶</a></dt>
<dd><p>returns a list of variable names from list varname
that match wildcard name in varname</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>varname</strong> (<em>str</em>) &#8211; a G2 variable name containing a wildcard
(such as *::var)</li>
<li><strong>varlist</strong> (<em>list</em>) &#8211; the list of all variable names used in
the current project</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">a list of matching GSAS-II variables (may be empty)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="GSASIIobj.MakeUniqueLabel">
<tt class="descclassname">GSASIIobj.</tt><tt class="descname">MakeUniqueLabel</tt><big>(</big><em>lbl</em>, <em>labellist</em><big>)</big><a class="reference internal" href="_modules/GSASIIobj.html#MakeUniqueLabel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GSASIIobj.MakeUniqueLabel" title="Permalink to this definition">¶</a></dt>
<dd><p>Make sure that every a label is unique against a list by adding
digits at the end until it is not found in list.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>lbl</strong> (<em>str</em>) &#8211; the input label</li>
<li><strong>labellist</strong> (<em>list</em>) &#8211; the labels that have already been encountered</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">lbl if not found in labellist or lbl with <tt class="docutils literal"><span class="pre">_1-9</span></tt> (or
<tt class="docutils literal"><span class="pre">_10-99</span></tt>, etc.) appended at the end</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="data">
<dt id="GSASIIobj.PhaseIdLookup">
<tt class="descclassname">GSASIIobj.</tt><tt class="descname">PhaseIdLookup</tt><em class="property"> = {}</em><a class="headerlink" href="#GSASIIobj.PhaseIdLookup" title="Permalink to this definition">¶</a></dt>
<dd><p>dict listing phase name and random Id keyed by sequential phase index as a str;
best to access this using <a class="reference internal" href="#GSASIIobj.LookupPhaseName" title="GSASIIobj.LookupPhaseName"><tt class="xref py py-func docutils literal"><span class="pre">LookupPhaseName()</span></tt></a></p>
</dd></dl>

<dl class="data">
<dt id="GSASIIobj.PhaseRanIdLookup">
<tt class="descclassname">GSASIIobj.</tt><tt class="descname">PhaseRanIdLookup</tt><em class="property"> = {}</em><a class="headerlink" href="#GSASIIobj.PhaseRanIdLookup" title="Permalink to this definition">¶</a></dt>
<dd><p>dict listing phase sequential index keyed by phase random Id;
best to access this using <a class="reference internal" href="#GSASIIobj.LookupPhaseId" title="GSASIIobj.LookupPhaseId"><tt class="xref py py-func docutils literal"><span class="pre">LookupPhaseId()</span></tt></a></p>
</dd></dl>

<dl class="data">
<dt id="GSASIIobj.ShortHistNames">
<tt class="descclassname">GSASIIobj.</tt><tt class="descname">ShortHistNames</tt><em class="property"> = {}</em><a class="headerlink" href="#GSASIIobj.ShortHistNames" title="Permalink to this definition">¶</a></dt>
<dd><p>a dict containing a possibly shortened and when non-unique numbered
version of the histogram name. Keyed by the histogram sequential index.</p>
</dd></dl>

<dl class="data">
<dt id="GSASIIobj.ShortPhaseNames">
<tt class="descclassname">GSASIIobj.</tt><tt class="descname">ShortPhaseNames</tt><em class="property"> = {}</em><a class="headerlink" href="#GSASIIobj.ShortPhaseNames" title="Permalink to this definition">¶</a></dt>
<dd><p>a dict containing a possibly shortened and when non-unique numbered
version of the phase name. Keyed by the phase sequential index.</p>
</dd></dl>

<dl class="data">
<dt id="GSASIIobj.VarDesc">
<tt class="descclassname">GSASIIobj.</tt><tt class="descname">VarDesc</tt><em class="property"> = {}</em><a class="headerlink" href="#GSASIIobj.VarDesc" title="Permalink to this definition">¶</a></dt>
<dd><p>This dictionary lists descriptions for GSAS-II variables,
as set in <a class="reference internal" href="#GSASIIobj.CompileVarDesc" title="GSASIIobj.CompileVarDesc"><tt class="xref py py-func docutils literal"><span class="pre">CompileVarDesc()</span></tt></a>. See that function for a description
for how keys and values are written.</p>
</dd></dl>

<dl class="function">
<dt id="GSASIIobj.VarDescr">
<tt class="descclassname">GSASIIobj.</tt><tt class="descname">VarDescr</tt><big>(</big><em>varname</em><big>)</big><a class="reference internal" href="_modules/GSASIIobj.html#VarDescr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GSASIIobj.VarDescr" title="Permalink to this definition">¶</a></dt>
<dd><p>Return two strings with a more complete description for a GSAS-II variable</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>name</strong> (<em>str</em>) &#8211; A full G2 variable name with 2 or 3 or 4
colons (&lt;p&gt;:&lt;h&gt;:name[:&lt;a&gt;] or &lt;p&gt;::RBname:&lt;r&gt;:&lt;t&gt;])</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">(loc,meaning) where loc describes what item the variable is mapped
(phase, histogram, etc.) and meaning describes what the variable does.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="GSASIIobj.fmtVarDescr">
<tt class="descclassname">GSASIIobj.</tt><tt class="descname">fmtVarDescr</tt><big>(</big><em>varname</em><big>)</big><a class="reference internal" href="_modules/GSASIIobj.html#fmtVarDescr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GSASIIobj.fmtVarDescr" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a string with a more complete description for a GSAS-II variable</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>varname</strong> (<em>str</em>) &#8211; A full G2 variable name with 2 or 3 or 4
colons (&lt;p&gt;:&lt;h&gt;:name[:&lt;a&gt;] or &lt;p&gt;::RBname:&lt;r&gt;:&lt;t&gt;])</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">a string with the description</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="GSASIIobj.getDescr">
<tt class="descclassname">GSASIIobj.</tt><tt class="descname">getDescr</tt><big>(</big><em>name</em><big>)</big><a class="reference internal" href="_modules/GSASIIobj.html#getDescr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GSASIIobj.getDescr" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a short description for a GSAS-II variable</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>name</strong> (<em>str</em>) &#8211; The descriptive part of the variable name without colons (:)</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">a short description or None if not found</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="GSASIIobj.getVarDescr">
<tt class="descclassname">GSASIIobj.</tt><tt class="descname">getVarDescr</tt><big>(</big><em>varname</em><big>)</big><a class="reference internal" href="_modules/GSASIIobj.html#getVarDescr"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#GSASIIobj.getVarDescr" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a short description for a GSAS-II variable</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>name</strong> (<em>str</em>) &#8211; A full G2 variable name with 2 or 3 or 4
colons (&lt;p&gt;:&lt;h&gt;:name[:&lt;a1&gt;][:&lt;a2&gt;])</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">a six element list as [<cite>p</cite>,`h`,`name`,`a1`,`a2`,`description`],
where <cite>p</cite>, <cite>h</cite>, <cite>a1</cite>, <cite>a2</cite> are str values or <cite>None</cite>, for the phase number,
the histogram number and the atom number; <cite>name</cite> will always be
a str; and <cite>description</cite> is str or <cite>None</cite>.
If the variable name is incorrectly formed (for example, wrong
number of colons), <cite>None</cite> is returned instead of a list.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="data">
<dt id="GSASIIobj.reVarDesc">
<tt class="descclassname">GSASIIobj.</tt><tt class="descname">reVarDesc</tt><em class="property"> = {}</em><a class="headerlink" href="#GSASIIobj.reVarDesc" title="Permalink to this definition">¶</a></dt>
<dd><p>This dictionary lists descriptions for GSAS-II variables with
the same values as <a class="reference internal" href="#GSASIIobj.VarDesc" title="GSASIIobj.VarDesc"><tt class="xref py py-attr docutils literal"><span class="pre">VarDesc</span></tt></a> except that keys have been compiled as
regular expressions. Initialized in <a class="reference internal" href="#GSASIIobj.CompileVarDesc" title="GSASIIobj.CompileVarDesc"><tt class="xref py py-func docutils literal"><span class="pre">CompileVarDesc()</span></tt></a>.</p>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/G2_html_logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#"><em>GSASIIobj: Data objects</em></a><ul>
<li><a class="reference internal" href="#constraints-tree-item">Constraints Tree Item</a></li>
<li><a class="reference internal" href="#covariance-tree-item">Covariance Tree Item</a></li>
<li><a class="reference internal" href="#phase-tree-items">Phase Tree Items</a></li>
<li><a class="reference internal" href="#rigid-body-objects">Rigid Body Objects</a></li>
<li><a class="reference internal" href="#space-group-objects">Space Group Objects</a></li>
<li><a class="reference internal" href="#atom-records">Atom Records</a></li>
<li><a class="reference internal" href="#drawing-atom-records">Drawing Atom Records</a></li>
<li><a class="reference internal" href="#powder-diffraction-tree-items">Powder Diffraction Tree Items</a></li>
<li><a class="reference internal" href="#powder-reflection-data-structure">Powder Reflection Data Structure</a></li>
<li><a class="reference internal" href="#single-crystal-tree-items">Single Crystal Tree Items</a></li>
<li><a class="reference internal" href="#single-crystal-reflection-data-structure">Single Crystal Reflection Data Structure</a></li>
<li><a class="reference internal" href="#image-data-structure">Image Data Structure</a></li>
<li><a class="reference internal" href="#parameter-dictionary">Parameter Dictionary</a></li>
<li><a class="reference internal" href="#classes-and-routines"><em>Classes and routines</em></a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="GSASII.html"
                        title="previous chapter"><em>GSAS-II Main Module</em></a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="GSASIIutil.html"
                        title="next chapter"><em>GSAS-II Utility Modules</em></a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/GSASIIobj.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="GSASIIutil.html" title="GSAS-II Utility Modules"
             >next</a> |</li>
        <li class="right" >
          <a href="GSASII.html" title="GSAS-II Main Module"
             >previous</a> |</li>
        <li><a href="index.html">GSAS-II 0.2.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Von Dreele and Toby for Argonne National Laboratory.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>